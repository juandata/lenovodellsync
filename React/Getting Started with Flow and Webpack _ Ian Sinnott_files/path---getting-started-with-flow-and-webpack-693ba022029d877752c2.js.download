webpackJsonp([0x87cd734908012800],{"./node_modules/json-loader/index.js!./.cache/json/getting-started-with-flow-and-webpack.json":function(n,s){n.exports={data:{post:{timeToRead:12,canonicalURL:"https://blog.iansinnott.com/getting-started-with-flow-and-webpack/",html:'<p><strong>TL;DR:</strong> This post will show you how to get set up with <a href="http://flowtype.org/">Flow</a> and <a href="https://webpack.github.io/">Webpack</a> as quickly as possible so that you can benefit from some degree of type safety in your JS code!</p>\n<h2 id="what-are-we-talking-about"><a href="#what-are-we-talking-about" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What are we talking about?</h2>\n<h3 id="flow"><a href="#flow" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Flow</h3>\n<p><a href="http://flowtype.org/">Flow</a> is like ESLint on steroids. It is a static type checker for JavaScript. It let\'s you add types to any existing JS code. <strong>Why would you want to do this?</strong>  The short answer is because JS ❤️ runtime errors, but runtime errors make your users sad. The more helpful answer is that Flow will analyze your codebase and catch bugs that may otherwise go unnoticed until you\'re app is already deployed to production. There is an entire site dedicated to explaining Flow, so I will let you check that out for more detailed information: <a href="http://flowtype.org/">http://flowtype.org/</a></p>\n<!-- more -->\n<p>However, what may not be immediately obvious from the Flow site is the reason why it\'s so appealing for existing projects, which is that you can <em>iterate</em> to full Flow coverage with minimal overhead.</p>\n<p>That means you can keep on hitting all your existing dev milestones while adding Flow type coverage to your code in parallel. Flow is also designed to work with <a href="http://babeljs.io/">Babel</a>, so if you\'re already using Babel in your toolchain you\'ll be pleasantly surprised at how easy it is to set Flow up.</p>\n<h3 id="webpack"><a href="#webpack" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Webpack</h3>\n<p>If you\'re reading this post you probably already know what Webpack is, but just in case here\'s a two-sentence explanation: <strong>Webpack is a module bundler that lets you split your JS code into separate files that can <code>import</code> or <code>require</code> each other</strong>, much like Require.js or Browserify. In addition, it also lets you import assets such as CSS files and images directly in your JavaScript files.</p>\n<p>In this post I\'m going to show you how you can get set up using Webpack with Flow, which might be a bit daunting at first since Flow doesn\'t support all of Webpack\'s features (such as CSS importing) out of the box.</p>\n<h2 id="getting-set-up"><a href="#getting-set-up" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting Set Up</h2>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>npm install -g flow-bin</code></pre>\n      </div>\n<p>That should be all you need to get the <code>flow</code> binary installed on your CLI.</p>\n<h3 id="setting-up-webpack-and-babel"><a href="#setting-up-webpack-and-babel" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setting Up Webpack and Babel</h3>\n<p>This one will vary greatly depending on your projects, so I won\'t go over it here. What I will mention is that in order for Babel to properly compile Flow-typed code you will need to use the <a href="https://www.npmjs.com/package/babel-plugin-transform-flow-strip-types">Babel Flow plugin</a>. If you\'re using <code>babel-plugin-react</code> then the Flow plugin should be included automatically.</p>\n<h2 id="initial-flow-configuration"><a href="#initial-flow-configuration" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Initial Flow Configuration</h2>\n<p>OK, here\'s the meat of this post. Once you have Flow installed and are in your projects root directory you will be ready to configure Flow. Let\'s do it.</p>\n<p><strong>Create a <code>.flowconfig</code> file</strong></p>\n<p>You can do this by running <code>flow init</code>.</p>\n<p>After running that command you should have a <code>.flowconfig</code> file in the current directory. Open up the file, since we will be editing it. You should see something like this initially:</p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>[ignore]\n\n[include]\n\n[libs]\n\n[options]</code></pre>\n      </div>\n<p><strong>Test your configuation</strong></p>\n<p>Run <code>flow</code> from the root directory where you just created <code>.flowconfig</code>. It will take a few seconds to run the first time, but every time after should be almost instant.</p>\n<p>You should see one of two things:</p>\n<ol>\n<li><code>No errors!</code></li>\n<li>A bunch of errors</li>\n</ol>\n<p>If you see a bunch of errors after just setting up Flow that is because Flow type-checks <em>everything</em>, even all the code in your <code>node_modules</code>. Although it may be counter intuitive this is actually desired behavior, because Flow can warn you if you try to import anything that doesn\'t exist from <code>node_modules</code>.</p>\n<p>However, the downside is that when you first set up Flow you might see something like this:</p>\n<p><img src="https://dropsinn.s3.amazonaws.com/Screen_Shot_2016-06-11_at_5_50_55_PM.png" alt="Flow Errors"></p>\n<p>In this example Flow is detecting type errors in the <code>fbjs</code> module, which is required by React. Getting past this issue is simple enough, simply add a new ignore line to <code>.flowconfig</code>. I have no idea how regex works in OCaml, but luckily there\'s no need. The Flow docs provide plenty of examples to show us how to ignore a certain directory. The syntax is <code>.*/path/to/dir/.*</code>. So to ignore everything under <code>node_modules/fbjs</code> you can update your <code>.flowconfig</code> as follows:</p>\n<div class="gatsby-highlight">\n      <pre class="language-ocaml"><code><span class="token punctuation">[</span>ignore<span class="token punctuation">]</span>\n<span class="token punctuation">.</span><span class="token operator">*/</span>node<span class="token punctuation">_</span>modules<span class="token operator">/</span>fbjs<span class="token operator">/.*</span>\n\n<span class="token punctuation">[</span><span class="token keyword">include</span><span class="token punctuation">]</span>\n\n<span class="token punctuation">[</span>libs<span class="token punctuation">]</span>\n\n<span class="token punctuation">[</span>options<span class="token punctuation">]</span>\n</code></pre>\n      </div>\n<p>Since you haven\'t yet told Flow to type check any of your own code, every error you see is due to some third-party node module. That means its safe to ignore. Add more lines to the <code>[ignore]</code> section of <code>.flowconfig</code> until you\'ve successfully ignored any offending node modules.</p>\n<p>Now you should see <code>No errors!</code> on the command line when you run <code>flow</code>.</p>\n<p>Whew, time to move on to the fun part: Typing your own code!</p>\n<h2 id="type-checking-our-own-code"><a href="#type-checking-our-own-code" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type checking our own code</h2>\n<p>To type check any of your js/jsx files with Flow simply add <code>/* @flow */</code> to the top of the file. This will make it visible to Flow. I would recommend doing this only one file at a time and fixing any errors that Flow catches in that file <em>before</em> type-checking any new files. This strategy is simply meant to keep the number of errors from seeming overwhelming, since untyped code can often have a ton of errors.</p>\n<p>It is also worth noting that if the errors are so many that they seem daunting you can use <code>/* @flow weak */</code> to turn on a weaker type-checking mode in Flow that will likely produce fewer errors. Once you have all those errors handled you can revert back to <code>/* @flow */</code> and handle the more strict errors. Using Flow in it\'s most strict mode is how it was meant to be used, and will ultimately provide you with the most safety.</p>\n<h2 id="advanced-configuration-css-modules-image-files-es7-etc"><a href="#advanced-configuration-css-modules-image-files-es7-etc" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Advanced Configuration: CSS Modules, Image files, ES7, etc</h2>\n<h3 id="css-modules"><a href="#css-modules" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CSS Modules</h3>\n<p>All right, we made it to the Webpack specific part of this post. Let\'s talk about making CSS Modules type-check with Flow. If you\'re not using CSS Modules you can safely skip this section, but you may also want to <a href="">check them out</a> since CSS Modules can be a big win for the maintainability of a codebase.</p>\n<p>Using CSS Modules with Webpack looks something like this:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> render <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'react-dom\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> s <span class="token keyword">from</span> <span class="token string">\'./App.css\'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// CSS Modules!</span>\n\n<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>s<span class="token punctuation">.</span>App<span class="token punctuation">}</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>h1<span class="token operator">></span>My App<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">\'root\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>The important part of that code is line 3, where we import <code>s</code> from a CSS file. Further down in the <code>render</code> method of <code>App</code> we see that <code>s</code> is expected to be a JavaScript object. However, Flow doesn\'t know this and it will complain as soon as it sees us trying to import a module named <code>App.css</code>. Flow will look for the <code>./App.css</code> JS module and find nothing, so it will throw an error:</p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>src/components/App.js:3\n  3: import s from \'./App.css\';\n                   ^^^^^^^^^^^ ./App.css. Required module not found</code></pre>\n      </div>\n<p>To solve this issue, we need to tell Flow to that for CSS files it should actually look for type definitions somewhere else. I\'ll describe how to do this briefly here, but there is also a good section on the Flow website that describes how to accomplish this: <a href="https://flowtype.org/docs/modules.html#css-modules-with-webpack">https://flowtype.org/docs/modules.html#css-modules-with-webpack</a></p>\n<p>Create a new directory named <code>flow</code> and a new file within that directory: <code>flow/CSSModule.js.flow</code>. Now add the following to <code>CSSModule.js.flow</code>:</p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>// @flow\n\ndeclare export default { [key: string]: string }</code></pre>\n      </div>\n<p>When Flow reads this file it will see a default export of a plain JavaScript object that maps string keys to string values, which is exactly the case for CSS modules.</p>\n<p>The last step to make this work is to tell Flow which file extensions should use this <code>CSSModule.js.flow</code> file. We do that in the <code>[options]</code> section of our <code>.flowconfig</code>:</p>\n<div class="gatsby-highlight">\n      <pre class="language-ocaml"><code><span class="token punctuation">[</span>ignore<span class="token punctuation">]</span>\n<span class="token punctuation">.</span><span class="token operator">*/</span>node<span class="token punctuation">_</span>modules<span class="token operator">/</span>fbjs<span class="token operator">/.*</span>\n\n<span class="token punctuation">[</span><span class="token keyword">include</span><span class="token punctuation">]</span>\n\n<span class="token punctuation">[</span>libs<span class="token punctuation">]</span>\n\n<span class="token punctuation">[</span>options<span class="token punctuation">]</span>\n<span class="token keyword">module</span><span class="token punctuation">.</span>name<span class="token punctuation">_</span>mapper<span class="token punctuation">.</span>extension<span class="token operator">=</span><span class="token type variable">\'css</span><span class="token type variable">\'</span> <span class="token operator">-></span> <span class="token type variable">\'</span><span class="token operator">&lt;</span>PROJECT<span class="token punctuation">_</span>ROOT<span class="token operator">>/</span>flow<span class="token operator">/</span>CSSModule<span class="token punctuation">.</span>js<span class="token punctuation">.</span>flow\'\n<span class="token keyword">module</span><span class="token punctuation">.</span>name<span class="token punctuation">_</span>mapper<span class="token punctuation">.</span>extension<span class="token operator">=</span><span class="token type variable">\'styl</span><span class="token type variable">\'</span> <span class="token operator">-></span> <span class="token type variable">\'</span><span class="token operator">&lt;</span>PROJECT<span class="token punctuation">_</span>ROOT<span class="token operator">>/</span>flow<span class="token operator">/</span>CSSModule<span class="token punctuation">.</span>js<span class="token punctuation">.</span>flow\'\n</code></pre>\n      </div>\n<p>The first line under <code>[options]</code> tells Flow that for every file with the <code>.css</code> extension it should read type info from the <code>CSSModule.js.flow</code> file we just created.</p>\n<p><strong>Note</strong> that you can map multiple extensions in the options section. In my case, I use <a href="http://stylus-lang.com/">Stylus</a> to author my CSS which means I needed to add the <code>.styl</code> extension as another filetype that should be interpreted as a CSS module. You can add support for Less and Sass in the same way.</p>\n<h3 id="image-files"><a href="#image-files" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Image Files</h3>\n<p>Since Webpack also lets you <code>import</code> image files we will want to add support for that as well. The process looks much the same as it did for CSS modules above: We need to create a new type definitions file that will be read for files with certain extensions. The only difference here is that our image files are imported as strings, not JavaScript objects as with CSS modules.</p>\n<p>Create another file: <code>flow/WebpackAsset.js.flow</code>. Now add the following to <code>WebpackAsset.js.flow</code>:</p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>// @flow\n\ndeclare export default string</code></pre>\n      </div>\n<p>Then tell Flow about this file in your <code>.flowconfig</code>:</p>\n<div class="gatsby-highlight">\n      <pre class="language-ocaml"><code><span class="token punctuation">[</span>ignore<span class="token punctuation">]</span>\n<span class="token punctuation">.</span><span class="token operator">*/</span>node<span class="token punctuation">_</span>modules<span class="token operator">/</span>fbjs<span class="token operator">/.*</span>\n\n<span class="token punctuation">[</span><span class="token keyword">include</span><span class="token punctuation">]</span>\n\n<span class="token punctuation">[</span>libs<span class="token punctuation">]</span>\n\n<span class="token punctuation">[</span>options<span class="token punctuation">]</span>\n<span class="token keyword">module</span><span class="token punctuation">.</span>name<span class="token punctuation">_</span>mapper<span class="token punctuation">.</span>extension<span class="token operator">=</span><span class="token type variable">\'css</span><span class="token type variable">\'</span> <span class="token operator">-></span> <span class="token type variable">\'</span><span class="token operator">&lt;</span>PROJECT<span class="token punctuation">_</span>ROOT<span class="token operator">>/</span>flow<span class="token operator">/</span>CSSModule<span class="token punctuation">.</span>js<span class="token punctuation">.</span>flow\'\n<span class="token keyword">module</span><span class="token punctuation">.</span>name<span class="token punctuation">_</span>mapper<span class="token punctuation">.</span>extension<span class="token operator">=</span><span class="token type variable">\'styl</span><span class="token type variable">\'</span> <span class="token operator">-></span> <span class="token type variable">\'</span><span class="token operator">&lt;</span>PROJECT<span class="token punctuation">_</span>ROOT<span class="token operator">>/</span>flow<span class="token operator">/</span>CSSModule<span class="token punctuation">.</span>js<span class="token punctuation">.</span>flow\'\n<span class="token keyword">module</span><span class="token punctuation">.</span>name<span class="token punctuation">_</span>mapper<span class="token punctuation">.</span>extension<span class="token operator">=</span><span class="token type variable">\'png</span><span class="token type variable">\'</span> <span class="token operator">-></span> <span class="token type variable">\'</span><span class="token operator">&lt;</span>PROJECT<span class="token punctuation">_</span>ROOT<span class="token operator">>/</span>flow<span class="token operator">/</span>WebpackAsset<span class="token punctuation">.</span>js<span class="token punctuation">.</span>flow\'\n<span class="token keyword">module</span><span class="token punctuation">.</span>name<span class="token punctuation">_</span>mapper<span class="token punctuation">.</span>extension<span class="token operator">=</span><span class="token type variable">\'jpg</span><span class="token type variable">\'</span> <span class="token operator">-></span> <span class="token type variable">\'</span><span class="token operator">&lt;</span>PROJECT<span class="token punctuation">_</span>ROOT<span class="token operator">>/</span>flow<span class="token operator">/</span>WebpackAsset<span class="token punctuation">.</span>js<span class="token punctuation">.</span>flow\'\n</code></pre>\n      </div>\n<p>In the above configuration file we tell Flow to use our <code>WebpackAsset.js.flow</code>\nfile in place of any file with a <code>.png</code> or <code>.jpg</code> extension.</p>\n<p>Now Flow will happily type code like this:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> render <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'react-dom\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> s <span class="token keyword">from</span> <span class="token string">\'./App.css\'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// CSS Modules!</span>\n<span class="token keyword">import</span> logo <span class="token keyword">from</span> <span class="token string">\'./logo.png\'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Image Files!</span>\n\n<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>s<span class="token punctuation">.</span>App<span class="token punctuation">}</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>h1<span class="token operator">></span>My App<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>\n        <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>logo<span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token string">\'App Logo\'</span> <span class="token operator">/</span><span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">\'root\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>Pretty slick, right? 😎</p>\n<p><strong>NOTE:</strong> You will need to have the proper module loaders set up with Webpack\nfor this to even work in the first place</p>\n<h3 id="es7-class-support"><a href="#es7-class-support" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ES7 Class Support</h3>\n<p>If you\'re authoring React code you may well be interested in compile ES7-style\nclass syntax with babel. This things like <code>static propTypes = {}</code>,<code>state = {}</code>, etc. For example, here\'s a <code>Counter</code> component written using ES7 class\nsyntax:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">\'react\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">import</span> s <span class="token keyword">from</span> <span class="token string">\'./Counter.css\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>\n    color<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>\n    initialCount<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  state <span class="token operator">=</span> <span class="token punctuation">{</span>\n    count<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>initialCount<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  increment <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  decrement <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>s<span class="token punctuation">.</span>Counter<span class="token punctuation">}</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>h1<span class="token operator">></span>Count<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>\n        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>s<span class="token punctuation">.</span>controls<span class="token punctuation">}</span><span class="token operator">></span>\n          <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>decrement<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n          <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>increment<span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>If you\'re not familiar with this syntax check out this blog post on the Babel\nwebsite: <a href="https://babeljs.io/blog/2015/06/07/react-on-es6-plus">https://babeljs.io/blog/2015/06/07/react-on-es6-plus</a></p>\n<p><strong>NOTE:</strong> At the time of this writing Flow requires semicolons after property\ninitializers in order to type check effectively, even though Babel does not\nrequire this.</p>\n<p>In order to allow code like that above we need to update the <code>[options]</code>\nsection of <code>.flowconfig</code> again:</p>\n<div class="gatsby-highlight">\n      <pre class="language-ocaml"><code><span class="token punctuation">[</span>ignore<span class="token punctuation">]</span>\n<span class="token punctuation">.</span><span class="token operator">*/</span>node<span class="token punctuation">_</span>modules<span class="token operator">/</span>fbjs<span class="token operator">/.*</span>\n\n<span class="token punctuation">[</span><span class="token keyword">include</span><span class="token punctuation">]</span>\n\n<span class="token punctuation">[</span>libs<span class="token punctuation">]</span>\n\n<span class="token punctuation">[</span>options<span class="token punctuation">]</span>\n<span class="token keyword">module</span><span class="token punctuation">.</span>name<span class="token punctuation">_</span>mapper<span class="token punctuation">.</span>extension<span class="token operator">=</span><span class="token type variable">\'css</span><span class="token type variable">\'</span> <span class="token operator">-></span> <span class="token type variable">\'</span><span class="token operator">&lt;</span>PROJECT<span class="token punctuation">_</span>ROOT<span class="token operator">>/</span>flow<span class="token operator">/</span>CSSModule<span class="token punctuation">.</span>js<span class="token punctuation">.</span>flow\'\n<span class="token keyword">module</span><span class="token punctuation">.</span>name<span class="token punctuation">_</span>mapper<span class="token punctuation">.</span>extension<span class="token operator">=</span><span class="token type variable">\'styl</span><span class="token type variable">\'</span> <span class="token operator">-></span> <span class="token type variable">\'</span><span class="token operator">&lt;</span>PROJECT<span class="token punctuation">_</span>ROOT<span class="token operator">>/</span>flow<span class="token operator">/</span>CSSModule<span class="token punctuation">.</span>js<span class="token punctuation">.</span>flow\'\n<span class="token keyword">module</span><span class="token punctuation">.</span>name<span class="token punctuation">_</span>mapper<span class="token punctuation">.</span>extension<span class="token operator">=</span><span class="token type variable">\'png</span><span class="token type variable">\'</span> <span class="token operator">-></span> <span class="token type variable">\'</span><span class="token operator">&lt;</span>PROJECT<span class="token punctuation">_</span>ROOT<span class="token operator">>/</span>flow<span class="token operator">/</span>WebpackAsset<span class="token punctuation">.</span>js<span class="token punctuation">.</span>flow\'\n<span class="token keyword">module</span><span class="token punctuation">.</span>name<span class="token punctuation">_</span>mapper<span class="token punctuation">.</span>extension<span class="token operator">=</span><span class="token type variable">\'jpg</span><span class="token type variable">\'</span> <span class="token operator">-></span> <span class="token type variable">\'</span><span class="token operator">&lt;</span>PROJECT<span class="token punctuation">_</span>ROOT<span class="token operator">>/</span>flow<span class="token operator">/</span>WebpackAsset<span class="token punctuation">.</span>js<span class="token punctuation">.</span>flow\'\nesproposal<span class="token punctuation">.</span>class<span class="token punctuation">_</span>static<span class="token punctuation">_</span>fields<span class="token operator">=</span>enable\nesproposal<span class="token punctuation">.</span>class<span class="token punctuation">_</span>instance<span class="token punctuation">_</span>fields<span class="token operator">=</span>enable\n</code></pre>\n      </div>\n<p>We\'ve added two new lines to tell Flow we want to support this new class\nsyntax:</p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>esproposal.class_static_fields=enable\nesproposal.class_instance_fields=enable</code></pre>\n      </div>\n<h3 id="ignore-single-lines-in-flow"><a href="#ignore-single-lines-in-flow" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ignore Single Lines in Flow</h3>\n<p>The last Flow trick I\'ll show you today is how to tell Flow to ignore single lines in your code. Just like with ESLint, it can be useful to be able to ignore just one line in a file. There are usually two reasons you would want to do this:</p>\n<ol>\n<li>The code in question needs to be refactored to be properly typed but it\nwould take too much time or effort to do it now</li>\n<li>Flow does not yet support some feature or has a bug</li>\n</ol>\n<p>The first point is pretty obvious, but the second may come as a surprise. Flow is very advanced and very useful <em>today</em> but it is not without its own bugs or missing features, so there may be times when you need to tell Flow to ignore a line for reason number two.</p>\n<p>The way to ignore single lines is by using the <code>supress_comment</code> option within your <code>.flowconfig</code>. Let\'s define two ignore patterns so that we can differentiate between the two types of reasons to ignore listed above:</p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>suppress_comment=\\\\(.\\\\|\\n\\\\)*\\\\$FlowFixMe\nsuppress_comment=\\\\(.\\\\|\\n\\\\)*\\\\$FlowIssue</code></pre>\n      </div>\n<p>Now anywhere in our code where we want Flow to ignore a line we can place a\ncomment on the proceeding line:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token comment" spellcheck="true">// $FlowFixMe: We aren\'t yet ready to refactor this line...</span>\n<span class="token keyword">function</span> <span class="token function">manyUntypedArgs</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">/* ... */</span> <span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<h2 id="conclusion"><a href="#conclusion" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2>\n<p>That\'s it! These are the tricks I\'ve found to be most useful in my day to day\nusage of Flow so far.</p>\n<p>Here\'s the full <code>.flowconfig</code> we created throughout this post for your\nreference:</p>\n<div class="gatsby-highlight">\n      <pre class="language-ocaml"><code><span class="token punctuation">[</span>ignore<span class="token punctuation">]</span>\n<span class="token punctuation">.</span><span class="token operator">*/</span>node<span class="token punctuation">_</span>modules<span class="token operator">/</span>fbjs<span class="token operator">/.*</span>\n\n<span class="token punctuation">[</span><span class="token keyword">include</span><span class="token punctuation">]</span>\n\n<span class="token punctuation">[</span>libs<span class="token punctuation">]</span>\n\n<span class="token punctuation">[</span>options<span class="token punctuation">]</span>\n<span class="token keyword">module</span><span class="token punctuation">.</span>name<span class="token punctuation">_</span>mapper<span class="token punctuation">.</span>extension<span class="token operator">=</span><span class="token type variable">\'css</span><span class="token type variable">\'</span> <span class="token operator">-></span> <span class="token type variable">\'</span><span class="token operator">&lt;</span>PROJECT<span class="token punctuation">_</span>ROOT<span class="token operator">>/</span>flow<span class="token operator">/</span>CSSModule<span class="token punctuation">.</span>js<span class="token punctuation">.</span>flow\'\n<span class="token keyword">module</span><span class="token punctuation">.</span>name<span class="token punctuation">_</span>mapper<span class="token punctuation">.</span>extension<span class="token operator">=</span><span class="token type variable">\'styl</span><span class="token type variable">\'</span> <span class="token operator">-></span> <span class="token type variable">\'</span><span class="token operator">&lt;</span>PROJECT<span class="token punctuation">_</span>ROOT<span class="token operator">>/</span>flow<span class="token operator">/</span>CSSModule<span class="token punctuation">.</span>js<span class="token punctuation">.</span>flow\'\n<span class="token keyword">module</span><span class="token punctuation">.</span>name<span class="token punctuation">_</span>mapper<span class="token punctuation">.</span>extension<span class="token operator">=</span><span class="token type variable">\'png</span><span class="token type variable">\'</span> <span class="token operator">-></span> <span class="token type variable">\'</span><span class="token operator">&lt;</span>PROJECT<span class="token punctuation">_</span>ROOT<span class="token operator">>/</span>flow<span class="token operator">/</span>WebpackAsset<span class="token punctuation">.</span>js<span class="token punctuation">.</span>flow\'\n<span class="token keyword">module</span><span class="token punctuation">.</span>name<span class="token punctuation">_</span>mapper<span class="token punctuation">.</span>extension<span class="token operator">=</span><span class="token type variable">\'jpg</span><span class="token type variable">\'</span> <span class="token operator">-></span> <span class="token type variable">\'</span><span class="token operator">&lt;</span>PROJECT<span class="token punctuation">_</span>ROOT<span class="token operator">>/</span>flow<span class="token operator">/</span>WebpackAsset<span class="token punctuation">.</span>js<span class="token punctuation">.</span>flow\'\nesproposal<span class="token punctuation">.</span>class<span class="token punctuation">_</span>static<span class="token punctuation">_</span>fields<span class="token operator">=</span>enable\nesproposal<span class="token punctuation">.</span>class<span class="token punctuation">_</span>instance<span class="token punctuation">_</span>fields<span class="token operator">=</span>enable\nsuppress<span class="token punctuation">_</span>comment<span class="token operator">=</span>\\\\<span class="token punctuation">(</span><span class="token punctuation">.</span>\\\\<span class="token operator">|</span>\\n\\\\<span class="token punctuation">)</span><span class="token operator">*</span>\\\\<span class="token operator">$</span>FlowFixMe\nsuppress<span class="token punctuation">_</span>comment<span class="token operator">=</span>\\\\<span class="token punctuation">(</span><span class="token punctuation">.</span>\\\\<span class="token operator">|</span>\\n\\\\<span class="token punctuation">)</span><span class="token operator">*</span>\\\\<span class="token operator">$</span>FlowIssue\n</code></pre>\n      </div>\n<p>You may have other options you need to make to your <code>.flowconfig</code>, such as\ndefining a directory for your <a href="https://flowtype.org/docs/declarations.html">declaration files</a>. But hopefully this\nconfiguration helps get you started with Flow and Webpack! Big wins ahead.</p>\n<p>If you have any questions feel free to lave a comment below or <a href="https://twitter.com/ian_sinn">hit me up on\ntwitter</a>.</p>',
frontmatter:{created:"2016-06-11T07:00:00.000Z",title:"Getting Started with Flow and Webpack",disqusId:null}}},pathContext:{id:"/Users/ian/dev/sites/blog.iansinnott.com/content/_posts/2016-06-11-getting-started-with-flow-and-webpack.md absPath of file >>> MarkdownRemark",next:{frontmatter:{title:"Migrating from Jekyll to Hexo",created:"2016-11-16T08:00:00.000Z"},slug:"migrating-from-jekyll-to-hexo"},prev:{frontmatter:{title:"Testing Webpack Plugins",created:"2016-05-11T07:00:00.000Z"},slug:"testing-webpack-plugins"}}}}});
//# sourceMappingURL=path---getting-started-with-flow-and-webpack-693ba022029d877752c2.js.map